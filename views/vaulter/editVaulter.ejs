<div class="container my-4 border border-black border-1 border-opacity-10 rounded p-3 shadow bg-primary bg-opacity-10" style="max-width: 80vh;">
  <h1 class="text-center mb-3">Edit Vaulter</h1>

  <form action="/vaulter/edit/<%= formData ? formData._id : '' %>" method="POST">
    <div class="row justify-content-center g-3 m-auto">

      <!-- Vaulter Name -->
      <div class="col-md-12">
        <div class="form-floating">
          <input type="text" class="form-control shadow-none" id="Name" name="Name" placeholder="Vaulter Name"
                 value="<%= formData ? formData.Name : '' %>" autocomplete="off">
          <label for="Name">Vaulter Name</label>
        </div>
      </div>

      <!-- FEI ID -->
      <div class="col-md-12">
        <div class="form-floating">
          <input type="text" class="form-control shadow-none" id="feiid" name="feiid" placeholder="FEI ID"
                 value="<%= formData ? formData.feiid : '' %>" autocomplete="off">
          <label for="feiid">FEI ID</label>
        </div>
      </div>

      <!-- Gender -->
      <div class="col-md-12">
        <div class="form-floating position-relative searchable-dropdown">
          <i class="bi bi-chevron-down position-absolute top-50 end-0 pe-3 translate-middle-y"></i>
          <input type="text" class="form-control shadow-none searchable-input"
                 placeholder="Search Gender"
                 autocomplete="off"
                 value="<%= formData ? formData.gender : '' %>">
          <label class="form-label">Gender</label>

          <!-- Hidden input for form submission -->
          <input type="hidden" class="searchable-hidden" name="gender"
                 value="<%= formData ? formData.gender : '' %>">

          <!-- Dropdown list -->
          <ul class="list-group position-absolute w-100 mt-1 shadow-sm d-none searchable-list"
              style="max-height: 200px; overflow-y: auto; z-index: 1000;">

              <li class="list-group-item list-group-item-action searchable-item" >Male</li>
              <li class="list-group-item list-group-item-action searchable-item" >Female</li>
          </ul>
        </div>
      </div>

      <!-- Birthdate -->
      <div class="col-md-12">
        <div class="form-floating">
          <input type="date" class="form-control shadow-none" id="Bdate" name="Bdate"
            value="<%= formData && formData.Bdate ? new Date(formData.Bdate).toISOString().split('T')[0] : '' %>">
          <label for="Bdate">Birthdate</label>
        </div>
      </div>

      <!-- Nationality (Searchable Dropdown with arrow) -->
      <div class="col-md-12">
        <div class="form-floating position-relative searchable-dropdown">
          <i class="bi bi-chevron-down position-absolute top-50 end-0 pe-3 translate-middle-y"></i>
          <input type="text" class="form-control shadow-none searchable-input"
                 placeholder="Search Nationality"
                 autocomplete="off"
                 value="<%= formData ? formData.Nationality : '' %>">
          <label class="form-label">Nationality</label>

          <!-- Hidden input for form submission -->
          <input type="hidden" class="searchable-hidden" name="Nationality"
                 value="<%= formData ? formData.Nationality : '' %>">

          <!-- Dropdown list -->
          <ul class="list-group position-absolute w-100 mt-1 shadow-sm d-none searchable-list"
              style="max-height: 200px; overflow-y: auto; z-index: 1000;">
            <% countries.forEach(country => { %>
              <li class="list-group-item list-group-item-action searchable-item"><%= country %></li>
            <% }) %>
          </ul>
        </div>
      </div>

            <!-- Status -->
      <div class="col-md-12">
        <div class="form-floating position-relative searchable-dropdown">
          <i class="bi bi-chevron-down position-absolute top-50 end-0 pe-3 translate-middle-y"></i>
          <input type="text" class="form-control shadow-none searchable-input"
                 placeholder="Search Status"
                 autocomplete="off"
                 value="<%= formData ? (formData.Status === 'active' ? 'Active' : 'Inactive') : '' %>">
          <label class="form-label">Status</label>

          <!-- Hidden input for form submission -->
          <input type="hidden" class="searchable-hidden" name="Status"
                 value="<%= formData ? formData.Status : '' %>">

          <!-- Dropdown list -->
          <ul class="list-group position-absolute w-100 mt-1 shadow-sm d-none searchable-list"
              style="max-height: 200px; overflow-y: auto; z-index: 1000;">

              <li class="list-group-item list-group-item-action searchable-item" val="active">Active</li>
              <li class="list-group-item list-group-item-action searchable-item" val="inactive">Inactive</li>
          </ul>
        </div>
      </div>

      <div class="col-md-12">
        <div class="form-floating">
          <input type="text" class="form-control shadow-none" id="ArmNr" name="ArmNr" placeholder="Arm Number"
                value="<%
                let armValue = '';

                 if (formData) {

                  if (Array.isArray(formData.ArmNr) && formData.ArmNr.length > 0){
                      armValue = formData.ArmNr[0].armNumber ? formData.ArmNr[0].armNumber : ''
                    } else {
                      armValue =   formData.arm ? formData.arm : '';

                  }}
                 %><%= armValue %>">
          <label for="ArmNr">Arm Number</label>
        </div>
      </div>

      <!-- Submit Button -->
      <div class="col-md-12 mt-3">
        <button type="submit" class="btn btn-primary w-100">Edit Vaulter</button>
      </div>

    </div>
  </form>
</div>
